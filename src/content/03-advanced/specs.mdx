---
title: "Specs 工作流程"
description: "学习如何使用 Specs 功能来指导 AI 完成复杂的开发任务"
level: advanced
estimatedMinutes: 20
order: 1
tags: ["Specs", "工作流程", "项目管理", "进阶功能"]
lastUpdated: "2025-11-16"
---

# Specs 工作流程

Specs 是 Claude Code 的一个强大功能，它允许你创建结构化的规范文档来指导 AI 完成复杂的开发任务。通过 Specs，你可以定义项目需求、设计决策和实现细节，让 AI 更好地理解你的意图并生成高质量的代码。

## 什么是 Specs？

Specs 是一种结构化的文档格式，用于定义软件项目的需求和实现计划。它包含：

- **项目概述**：项目的目标和范围
- **需求定义**：功能需求和非功能需求
- **设计规范**：架构设计和技术选择
- **实现计划**：分步骤的实现任务
- **测试策略**：测试计划和验收标准

## Specs 的优势

### 1. 清晰的需求定义

通过 Specs，你可以明确定义项目的需求，避免歧义和误解。

### 2. 更好的 AI 理解

AI 能够理解完整的项目上下文，生成更符合需求的代码。

### 3. 可追踪的进度

Specs 中的任务列表可以帮助你追踪项目进度。

### 4. 团队协作

Specs 可以作为团队成员之间的沟通工具，确保所有人对项目有相同的理解。

## 创建 Specs 文档

### 基本结构

一个典型的 Specs 文档包含以下部分：

```markdown
# 项目名称

## 项目概述

简要描述项目的目标和范围。

## 需求

### 功能需求

列出所有功能需求。

### 非功能需求

列出性能、安全性等非功能需求。

## 设计

### 架构设计

描述系统架构。

### 技术栈

列出使用的技术和框架。

## 实现计划

### 第一阶段

描述第一阶段的任务。

### 第二阶段

描述第二阶段的任务。

## 测试策略

描述测试计划和验收标准。
```

### 实际示例

让我们创建一个真实的 Specs 文档示例：

```markdown
# 用户管理系统

## 项目概述

构建一个完整的用户管理系统，包括用户注册、登录、个人资料管理和权限控制。

**目标**：
- 提供安全的用户认证
- 支持用户个人资料管理
- 实现基于角色的访问控制（RBAC）
- 提供用户管理的后台界面

**范围**：
- 前端：React + TypeScript
- 后端：Node.js + Express
- 数据库：PostgreSQL
- 认证：JWT

## 需求

### 功能需求

1. **用户认证**
   - 用户注册（邮箱、密码）
   - 用户登录（邮箱、密码）
   - 密码重置功能
   - 邮箱验证

2. **用户管理**
   - 查看个人资料
   - 编辑个人资料（名字、头像、生物）
   - 修改密码
   - 删除账户

3. **权限管理**
   - 定义用户角色（管理员、编辑、查看者）
   - 为用户分配角色
   - 基于角色的访问控制

4. **后台管理**
   - 查看所有用户列表
   - 搜索和过滤用户
   - 禁用/启用用户账户
   - 查看用户活动日志

### 非功能需求

- **性能**：API 响应时间 < 200ms
- **安全性**：密码加密、SQL 注入防护、CSRF 防护
- **可用性**：支持移动端、响应式设计
- **可扩展性**：支持至少 10,000 并发用户

## 设计

### 架构设计

```
┌─────────────────┐
│   React 前端    │
└────────┬────────┘
         │ HTTP/REST
┌────────▼────────┐
│  Express 后端   │
└────────┬────────┘
         │ SQL
┌────────▼────────┐
│   PostgreSQL    │
└─────────────────┘
```

### 技术栈

- **前端**：React 18, TypeScript, Tailwind CSS, React Router
- **后端**：Node.js, Express, JWT, bcrypt
- **数据库**：PostgreSQL, Sequelize ORM
- **测试**：Jest, React Testing Library
- **部署**：Docker, GitHub Actions

### 数据模型

```typescript
// User 表
interface User {
  id: string;
  email: string;
  password: string; // 加密后
  name: string;
  avatar?: string;
  bio?: string;
  role: 'admin' | 'editor' | 'viewer';
  isActive: boolean;
  createdAt: Date;
  updatedAt: Date;
}

// Session 表
interface Session {
  id: string;
  userId: string;
  token: string;
  expiresAt: Date;
  createdAt: Date;
}
```

## 实现计划

### 第一阶段：后端基础设施（第 1-2 周）

- [ ] 设置 Express 项目和数据库连接
- [ ] 实现用户模型和数据库迁移
- [ ] 实现用户注册 API
- [ ] 实现用户登录 API
- [ ] 实现 JWT 认证中间件
- [ ] 编写单元测试

### 第二阶段：用户管理功能（第 3-4 周）

- [ ] 实现获取用户资料 API
- [ ] 实现编辑用户资料 API
- [ ] 实现修改密码 API
- [ ] 实现删除账户 API
- [ ] 实现邮箱验证功能
- [ ] 编写集成测试

### 第三阶段：权限管理（第 5 周）

- [ ] 实现角色管理 API
- [ ] 实现权限检查中间件
- [ ] 实现用户角色分配 API
- [ ] 编写权限测试

### 第四阶段：前端开发（第 6-8 周）

- [ ] 创建项目结构和路由
- [ ] 实现登录页面
- [ ] 实现注册页面
- [ ] 实现用户资料页面
- [ ] 实现后台管理界面
- [ ] 集成 API 调用

### 第五阶段：测试和部署（第 9-10 周）

- [ ] 完整的端到端测试
- [ ] 性能测试和优化
- [ ] 安全审计
- [ ] Docker 容器化
- [ ] 部署到生产环境

## 测试策略

### 单元测试

- 用户模型的验证逻辑
- 密码加密和验证
- JWT 令牌生成和验证

### 集成测试

- 用户注册流程
- 用户登录流程
- 权限检查流程

### 端到端测试

- 完整的用户注册和登录流程
- 用户资料编辑流程
- 后台管理操作流程

### 验收标准

- 所有 API 端点都有相应的测试
- 测试覆盖率 > 80%
- 所有安全检查都已实现
- 性能指标达到要求

## 参考资源

- [Express 官方文档](https://expressjs.com/)
- [React 官方文档](https://react.dev/)
- [PostgreSQL 官方文档](https://www.postgresql.org/docs/)
- [JWT 认证最佳实践](https://tools.ietf.org/html/rfc7519)
```

## 使用 Specs 与 Claude Code

### 步骤 1：创建 Specs 文档

1. 在项目中创建 `.kiro/specs/` 目录
2. 创建 `project-name.md` 文件
3. 编写详细的 Specs 文档

### 步骤 2：在 Chat 中引用 Specs

在 Claude Code 的 Chat 中，你可以引用 Specs 文档：

```
你：根据 #specs/user-management 中的规范，实现用户注册 API

AI：我已经阅读了 Specs 文档。我将按照以下步骤实现用户注册 API：
1. 验证邮箱和密码
2. 检查邮箱是否已存在
3. 加密密码
4. 创建用户记录
5. 返回 JWT 令牌

[AI 生成完整的代码实现]
```

### 步骤 3：追踪实现进度

在 Specs 中更新任务完成状态：

```markdown
### 第一阶段：后端基础设施

- [x] 设置 Express 项目和数据库连接
- [x] 实现用户模型和数据库迁移
- [x] 实现用户注册 API
- [ ] 实现用户登录 API
- [ ] 实现 JWT 认证中间件
- [ ] 编写单元测试
```

## Specs 最佳实践

### 1. 清晰的需求定义

- 使用具体的、可测量的需求
- 避免模糊的表述
- 包含验收标准

### 2. 详细的设计文档

- 描述系统架构
- 列出技术栈
- 定义数据模型

### 3. 可行的实现计划

- 将大任务分解为小任务
- 估计每个任务的工作量
- 定义任务之间的依赖关系

### 4. 清晰的测试策略

- 定义测试类型（单元、集成、端到端）
- 列出验收标准
- 定义测试覆盖率目标

### 5. 定期更新

- 根据实际进度更新 Specs
- 记录设计决策的变更
- 保持文档与代码同步

## 实际案例

### 案例：电商平台开发

使用 Specs 来管理一个复杂的电商平台项目：

```markdown
# 电商平台

## 项目概述

构建一个完整的电商平台，包括商品管理、购物车、订单管理和支付功能。

## 需求

### 功能需求

1. **商品管理**
   - 浏览商品列表
   - 搜索和过滤商品
   - 查看商品详情
   - 添加商品到购物车

2. **购物车**
   - 查看购物车
   - 修改商品数量
   - 删除商品
   - 计算总价

3. **订单管理**
   - 创建订单
   - 查看订单历史
   - 追踪订单状态
   - 取消订单

4. **支付**
   - 集成支付网关
   - 处理支付回调
   - 生成发票

## 实现计划

### 第一阶段：商品管理（第 1-2 周）

- [ ] 设计商品数据模型
- [ ] 实现商品 API
- [ ] 创建商品列表页面
- [ ] 实现搜索和过滤

### 第二阶段：购物车（第 3 周）

- [ ] 实现购物车 API
- [ ] 创建购物车页面
- [ ] 实现购物车逻辑

### 第三阶段：订单和支付（第 4-5 周）

- [ ] 实现订单 API
- [ ] 集成支付网关
- [ ] 创建订单页面

### 第四阶段：测试和优化（第 6 周）

- [ ] 完整测试
- [ ] 性能优化
- [ ] 部署
```

## 常见问题

### Q: Specs 应该有多详细？

**A:** Specs 应该包含足够的细节让 AI 理解你的需求，但不需要过度详细。通常 2-5 页的文档就足够了。

### Q: 如何在团队中使用 Specs？

**A:** 将 Specs 文档存储在版本控制系统中，团队成员可以一起编辑和讨论。

### Q: Specs 可以在项目进行中修改吗？

**A:** 完全可以。Specs 应该随着项目的进展而更新，记录设计决策的变更。

### Q: 如何将 Specs 与代码关联？

**A:** 在代码注释中引用 Specs 中的相关部分，例如 `// 参见 Specs: 用户认证部分`。

## 下一步

现在你已经了解了 Specs 工作流程，可以继续学习：

- [Agent Hooks](/03-advanced/hooks) - 自动化开发工作流程
- [Steering 配置](/03-advanced/steering) - 为团队定制 AI 行为

## 小结

Specs 是一个强大的工具，可以帮助你：

- ✅ 清晰地定义项目需求
- ✅ 让 AI 更好地理解你的意图
- ✅ 追踪项目进度
- ✅ 促进团队协作
- ✅ 生成高质量的代码

通过有效使用 Specs，你可以大大提高开发效率和代码质量。
